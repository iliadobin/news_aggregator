# –≠–ø–∏–∫ 3: –î–≤–∏–∂–æ–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º

## –û–±–∑–æ—Ä

–í —Ä–∞–º–∫–∞—Ö —Ç—Ä–µ—Ç—å–µ–≥–æ —ç–ø–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤, –≤–∫–ª—é—á–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—é –∏ –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—é.

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –î–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (`app/domain/entities.py`)

–û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∞—Ç—á–∏–Ω–≥–∞:

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

- **`Language`** - –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤ (RU, EN, AUTO)
- **`FilterMode`** - —Ä–µ–∂–∏–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (KEYWORD_ONLY, SEMANTIC_ONLY, COMBINED)
- **`MatchType`** - —Ç–∏–ø—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (KEYWORD, SEMANTIC, COMBINED)

#### –û–ø—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

- **`KeywordOptions`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:
  - `case_sensitive` - —É—á–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞
  - `whole_word` - –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã—Ö —Å–ª–æ–≤
  - `use_lemmatization` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–∏
  - `language` - —è–∑—ã–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - `min_keyword_length` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞

- **`SemanticOptions`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞:
  - `threshold` - –ø–æ—Ä–æ–≥ —Å—Ö–æ–¥—Å—Ç–≤–∞ (0.0-1.0)
  - `use_cached_embeddings` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  - `language` - —è–∑—ã–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

- **`FilterConfig`** - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞:
  - `mode` - —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞
  - `keywords` - —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  - `topics` - —Å–ø–∏—Å–æ–∫ —Ç–µ–º –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
  - `keyword_options` - –æ–ø—Ü–∏–∏ –¥–ª—è keyword –º–∞—Ç—á–∏–Ω–≥–∞
  - `semantic_options` - –æ–ø—Ü–∏–∏ –¥–ª—è semantic –º–∞—Ç—á–∏–Ω–≥–∞
  - `require_all_keywords` - —Ç—Ä–µ–±–æ–≤–∞—Ç—å –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–ª–∏ –ª—é–±–æ–µ
  - –ú–µ—Ç–æ–¥ `validate_for_mode()` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **`FilterRule`** - –ø—Ä–∞–≤–∏–ª–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:
  - `id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞
  - `user_id` - –≤–ª–∞–¥–µ–ª–µ—Ü —Ñ–∏–ª—å—Ç—Ä–∞
  - `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
  - `is_active` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞
  - `config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞
  - `created_at` / `updated_at` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

#### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

- **`NormalizedText`** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞:
  - `original` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `normalized` - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `tokens` - —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤
  - `language` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —è–∑—ã–∫
  - `lemmas` - –ª–µ–º–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –°–≤–æ–π—Å—Ç–≤–æ `is_empty` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Å—Ç–æ—Ç—ã

- **`KeywordMatch`** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç keyword –º–∞—Ç—á–∏–Ω–≥–∞:
  - `matched_keywords` - —Å–ø–∏—Å–æ–∫ —Å–æ–≤–ø–∞–≤—à–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  - `match_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
  - `positions` - –ø–æ–∑–∏—Ü–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
  - –°–≤–æ–π—Å—Ç–≤–æ `has_match` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

- **`SemanticMatch`** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç semantic –º–∞—Ç—á–∏–Ω–≥–∞:
  - `matched_topics` - —Å–ø–∏—Å–æ–∫ —Å–æ–≤–ø–∞–≤—à–∏—Ö —Ç–µ–º
  - `scores` - –æ—Ü–µ–Ω–∫–∏ —Å—Ö–æ–¥—Å—Ç–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ–º—ã
  - `max_score` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
  - –°–≤–æ–π—Å—Ç–≤–æ `has_match` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

- **`FilterMatchResult`** - –ø–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞:
  - `filter_id` / `message_id` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
  - `match_type` - —Ç–∏–ø —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
  - `matched` - —Ñ–ª–∞–≥ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
  - `keyword_match` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã keyword –º–∞—Ç—á–∏–Ω–≥–∞
  - `semantic_match` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã semantic –º–∞—Ç—á–∏–Ω–≥–∞
  - `score` - –æ–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
  - –°–≤–æ–π—Å—Ç–≤–æ `details` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –≤ –≤–∏–¥–µ —Å–ª–æ–≤–∞—Ä—è

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

- **`MessageEntity`** - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **`SourceEntity`** - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- **`UserEntity`** - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (`app/nlp/preprocess.py`)

–ú–æ–¥—É–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤.

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞

```python
def detect_language(text: str) -> Optional[str]
```
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `langdetect`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ —è–∑—ã–∫–∞ ('ru', 'en', –∏ —Ç.–¥.) –∏–ª–∏ None

#### –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞

```python
def clean_text(text: str, remove_urls: bool = True, remove_mentions: bool = False) -> str
```
- –£–¥–∞–ª–µ–Ω–∏–µ URL (http/https, www, t.me)
- –£–¥–∞–ª–µ–Ω–∏–µ Telegram —É–ø–æ–º–∏–Ω–∞–Ω–∏–π (@username)
- –£–¥–∞–ª–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤

```python
def remove_emojis(text: str) -> str
```
- –£–¥–∞–ª–µ–Ω–∏–µ emoji —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞
- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã Unicode emoji

```python
def normalize_whitespace(text: str) -> str
```
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤, —Ç–∞–±—É–ª—è—Ü–∏–π, –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
- –£–¥–∞–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö/–∫–æ–Ω–µ—á–Ω—ã—Ö –ø—Ä–æ–±–µ–ª–æ–≤

#### –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è

```python
def tokenize_simple(text: str, min_length: int = 1) -> list[str]
```
- –ü—Ä–æ—Å—Ç–∞—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –ø–æ regex –ø–∞—Ç—Ç–µ—Ä–Ω—É
- –ë—ã—Å—Ç—Ä–∞—è, –Ω–æ –º–µ–Ω–µ–µ —Ç–æ—á–Ω–∞—è

```python
def tokenize_nltk(text: str, language: str = "english") -> list[str]
```
- –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ NLTK word tokenizer
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è, –ª—É—á—à–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é

```python
def tokenize(text: str, language: Optional[str] = None, use_nltk: bool = True) -> list[str]
```
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞

#### –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è

```python
def lemmatize_russian(tokens: list[str]) -> list[str]
```
- –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤ —á–µ—Ä–µ–∑ `pymorphy2`
- –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Å–ª–æ–≤ –∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ñ–æ—Ä–º–µ

```python
def lemmatize_english(tokens: list[str]) -> list[str]
```
- –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤ —á–µ—Ä–µ–∑ NLTK WordNet
- –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Å–ª–æ–≤ –∫ –±–∞–∑–æ–≤–æ–π —Ñ–æ—Ä–º–µ

```python
def lemmatize(tokens: list[str], language: Optional[str] = None) -> list[str]
```
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –ø–æ —è–∑—ã–∫—É

#### –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

```python
def normalize_text(
    text: str,
    language: Language = Language.AUTO,
    lowercase: bool = True,
    remove_urls: bool = True,
    remove_mentions: bool = False,
    remove_emojis_flag: bool = True,
    use_lemmatization: bool = True,
    use_nltk_tokenizer: bool = True,
    min_token_length: int = 2,
) -> NormalizedText
```

–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞:
1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ (–µ—Å–ª–∏ AUTO)
2. –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
3. –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
4. –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è
5. –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `NormalizedText` —Å–æ –≤—Å–µ–º–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

#### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

```python
def prepare_keyword(keyword: str, lowercase: bool = True) -> str
def prepare_keywords(keywords: list[str], lowercase: bool = True, 
                    remove_duplicates: bool = True) -> list[str]
```
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### 3. –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (`app/filters/keyword_matcher.py`)

–ú–æ–¥—É–ª—å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏ –∏ –æ–ø—Ü–∏—è–º–∏.

#### –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞

```python
def match_keyword_simple(
    text: str,
    keyword: str,
    case_sensitive: bool = False,
    whole_word: bool = False,
) -> tuple[bool, list[int]]
```
- –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ –≤ —Ç–µ–∫—Å—Ç–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–ª–∞–≥ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π

```python
def match_keyword_in_tokens(
    tokens: list[str],
    keyword: str,
    case_sensitive: bool = False,
) -> bool
```
- –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ –≤ —Å–ø–∏—Å–∫–µ —Ç–æ–∫–µ–Ω–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã—Ö —Ñ—Ä–∞–∑
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤

#### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–∏—Å–∫

```python
def match_keywords_in_text(
    text: str,
    keywords: list[str],
    options: Optional[KeywordOptions] = None,
    normalized_text: Optional[NormalizedText] = None,
) -> KeywordMatch
```

–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –æ–ø—Ü–∏–π –∏–∑ `KeywordOptions`
- –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∏—Å–∫–∞ (—Ç–æ–∫–µ–Ω—ã/–ª–µ–º–º—ã/–ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç `KeywordMatch`

```python
def match_filter_keywords(
    text: str,
    filter_config: FilterConfig,
    normalized_text: Optional[NormalizedText] = None,
) -> KeywordMatch
```
- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `FilterConfig`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ –æ–ø—Ü–∏–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```python
def check_keywords_match_all(
    text: str,
    keywords: list[str],
    options: Optional[KeywordOptions] = None,
) -> bool
```
- –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –í–°–ï –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã –≤ —Ç–µ–∫—Å—Ç–µ

```python
def check_keywords_match_any(
    text: str,
    keywords: list[str],
    options: Optional[KeywordOptions] = None,
) -> bool
```
- –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –•–û–¢–Ø –ë–´ –û–î–ù–û –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –Ω–∞–π–¥–µ–Ω–æ

```python
def evaluate_filter_keywords(
    text: str,
    filter_config: FilterConfig,
    normalized_text: Optional[NormalizedText] = None,
) -> bool
```
- –û—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–µ–∫—Å—Ç–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ñ–∏–ª—å—Ç—Ä–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–ª–∞–≥ `require_all_keywords`

#### –£—Ç–∏–ª–∏—Ç—ã

```python
def get_match_score(match: KeywordMatch) -> float
```
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –¥–ª—è keyword match (0.0-1.0)
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

```python
def highlight_keywords(
    text: str,
    match: KeywordMatch,
    highlight_format: str = "**{keyword}**",
) -> str
```
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏

## –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã comprehensive unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

### `app/tests/unit/test_entities.py`
- –¢–µ—Å—Ç—ã –¥–æ–º–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### `app/tests/unit/test_preprocess.py`
- –¢–µ—Å—Ç—ã –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
- –¢–µ—Å—Ç—ã —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
- –¢–µ—Å—Ç—ã –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –¢–µ—Å—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

### `app/tests/unit/test_keyword_matcher.py`
- –¢–µ—Å—Ç—ã –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –¢–µ—Å—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö
- –¢–µ—Å—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
- –¢–µ—Å—Ç—ã –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã—Ö —Ñ—Ä–∞–∑
- –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ NLP –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ `requirements.txt`:

```
pymorphy2>=0.9.1              # –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
pymorphy2-dicts-ru>=2.4.0     # –°–ª–æ–≤–∞—Ä–∏ –¥–ª—è pymorphy2
nltk>=3.8.0                    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
langdetect>=1.0.9              # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
regex>=2023.0.0                # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞

```python
from app.nlp import normalize_text
from app.domain import Language

text = "–ü—Ä–∏–≤–µ—Ç! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—à –∫–∞–Ω–∞–ª: https://t.me/example üöÄ"
result = normalize_text(
    text,
    language=Language.AUTO,
    remove_urls=True,
    remove_emojis_flag=True,
)

print(f"Normalized: {result.normalized}")
print(f"Tokens: {result.tokens}")
print(f"Language: {result.language}")
print(f"Lemmas: {result.lemmas}")
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

```python
from app.filters import match_keywords_in_text
from app.domain import KeywordOptions, Language

text = "Python - –æ—Ç–ª–∏—á–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö"
keywords = ["python", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"]

options = KeywordOptions(
    case_sensitive=False,
    use_lemmatization=True,
    language=Language.RUSSIAN,
)

match = match_keywords_in_text(text, keywords, options)

print(f"Matched: {match.has_match}")
print(f"Keywords found: {match.matched_keywords}")
print(f"Match count: {match.match_count}")
```

### –ü—Ä–∏–º–µ—Ä 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FilterConfig

```python
from app.filters import match_filter_keywords
from app.domain import FilterConfig, FilterMode, KeywordOptions

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞
config = FilterConfig(
    mode=FilterMode.KEYWORD_ONLY,
    keywords=["python", "javascript", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"],
    require_all_keywords=False,  # –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª—é–±–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    keyword_options=KeywordOptions(
        case_sensitive=False,
        whole_word=True,
        use_lemmatization=True,
    ),
)

# –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
config.validate_for_mode()

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
text = "–ò–∑—É—á–∞—é Python –∏ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"
match = match_filter_keywords(text, config)

if match.has_match:
    print(f"Filter matched! Found: {match.matched_keywords}")
```

### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ñ–∏–ª—å—Ç—Ä—É

```python
from app.filters import evaluate_filter_keywords
from app.domain import FilterConfig, FilterMode

config = FilterConfig(
    mode=FilterMode.KEYWORD_ONLY,
    keywords=["python", "django", "flask"],
    require_all_keywords=True,  # –¢—Ä–µ–±—É—é—Ç—Å—è –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
)

text1 = "Python —Å Django –∏ Flask - –º–æ—â–Ω—ã–π —Å—Ç–µ–∫"
text2 = "Python - –æ—Ç–ª–∏—á–Ω—ã–π —è–∑—ã–∫"

print(evaluate_filter_keywords(text1, config))  # True - –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã
print(evaluate_filter_keywords(text2, config))  # False - –Ω–µ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã
```

### –ü—Ä–∏–º–µ—Ä 5: –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

```python
from app.filters import match_keywords_in_text, highlight_keywords

text = "Python - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è"
keywords = ["python", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"]

match = match_keywords_in_text(text, keywords)
highlighted = highlight_keywords(text, match)

print(highlighted)
# **Python** - —è–∑—ã–∫ **–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è** –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **Domain layer** - —á–∏—Å—Ç—ã–µ –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **NLP layer** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
- **Filters layer** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º NLP

### 2. –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- NLP –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- NLTK –¥–∞–Ω–Ω—ã–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ (MorphAnalyzer, WordNetLemmatizer)

### 3. –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Pydantic –º–æ–¥–µ–ª–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∏–ø–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- –í—ã–±–æ—Ä –º–µ–∂–¥—É –±—ã—Å—Ç—Ä–æ–π –∏ —Ç–æ—á–Ω–æ–π —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–µ–π
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è

### 5. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ß–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–î–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —ç–ø–∏–∫–∞—Ö:

- **–≠–ø–∏–∫ 4**: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å embeddings)
- **–≠–ø–∏–∫ 5**: –ö–æ–Ω–≤–µ–π–µ—Ä —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ keyword –∏ semantic)
- **–≠–ø–∏–∫ 6**: –Æ–∑–µ—Ä-–±–æ—Ç (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫ —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º)
- **–≠–ø–∏–∫ 7**: –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–æ—Ç (UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–Ø–∑—ã–∫–∏**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
2. **–õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
3. **–ú–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–µ —Ñ—Ä–∞–∑—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit-—Ç–µ—Å—Ç–æ–≤
pytest app/tests/unit/

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest app/tests/unit/ --cov=app --cov-report=html

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è
pytest app/tests/unit/test_keyword_matcher.py -v
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢—Ä–µ—Ç–∏–π —ç–ø–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º —Å:

‚úÖ –î–æ–º–µ–Ω–Ω—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤  
‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ç–µ–∫—Å—Ç–∞ (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)  
‚úÖ –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–µ–π –∏ –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π  
‚úÖ –ì–∏–±–∫–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤  
‚úÖ Comprehensive —Ç–µ—Å—Ç–æ–≤—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º  
‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏

–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã.
